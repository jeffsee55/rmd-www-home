<aside class="col-12 col-md-3 col-xl-2 bd-sidebar">
    {{ $currentPage := . }}
    <h5>{{ .FirstSection }}</h5>
    {{ range .FirstSection.Sections }}
        <b>"{{ .Name }}" - {{ .Summary  }}</b>
        <b>"{{ .Name }}" - {{ printf "%#v" . }}</b>
    {{ end }}

    {{ range .Site.Menus.sidenav }}
        {{ template "main_nav_item" (dict "currentPage" $currentPage "content" .) }}
    {{ end }}
</aside>

{{ define "side_nav_item" }}
    <ul>
        {{ .Name }}
        {{ range .Sections }}
            {{ range .Pages }}
                <li> {{ .Name }} </li>
            {{ end }}
            {{ template "side_nav_item" . }}
        {{ end }}
    </ul>
{{ end }}

{{ define "main_nav_item" }}
    {{ $currentPage := .currentPage }}
    {{with .content}}
    <ul>
    {{ if .HasChildren }}
        <ul data-toggle="collapse" href="#{{ .Name | urlize }}" role="button" aria-expanded="false" aria-controls="{{ .Name | urlize }}">{{ .Name }} <i class="pl-1 text-xs fas fa-caret-down"></i></ul>
        <li id="{{ .Name | urlize }}" class='panel-collapse collapse {{ if $currentPage.HasMenuCurrent "main" . }}show{{ end }}'>
        {{ range .Children }}
            {{ template "main_nav_item" (dict "currentPage" $currentPage "content" .) }}
        {{ end }}
        </li>
    {{ else }}
        <li>
        <a class='{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}' href="{{ .URL }}">{{ .Name }}</a>
        </li>
    {{ end }}
    {{ end }}
    </ul>
{{ end }}